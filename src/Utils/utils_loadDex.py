import os
from Utils.Data import analyzeHeadless,ghidra_projects


def LoadDexRecursive(path):
    # takes only last part of a path
    dexFile_index = os.path.basename(os.path.normpath(path))
    # takes only the index of path
    dexFile_index = dexFile_index.replace('DexFiles', '')
    # create name project for Ghidra
    namePrj = "Dataset" + dexFile_index
    
    command = analyzeHeadless + " " + ghidra_projects + " " + namePrj + " -import " + path + " -recursive -max-cpu 8"
    os.system(command)
    print (command)