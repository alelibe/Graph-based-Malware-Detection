# This code trasform each graph (stored in a json file) in a pyg object
from Utils.config import preprocessedGraphs,external_fun_vocabulary,pyg_objects
from Utils.vocabulary import Vocabulary
from Utils.trasformGraphs import graphAggregator,openDSinfo,checkLabel,graph_list_2_pyg_object


if __name__ == '__main__':
    # transfrom graphs of each apk to one graph
    graphAggregator()

    max_vocab_size = 10000
    vocabulary = Vocabulary(freq_file=external_fun_vocabulary, max_vocab_size=max_vocab_size)

    #convert json graph in pyG object
    graph_list_2_pyg_object(dir_graphs=preprocessedGraphs,label=1,vocab=vocabulary)