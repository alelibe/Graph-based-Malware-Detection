import threading
import json

class ApkNoMainManager():

    lock = None
    apk_noMain = []

    def __init__(self) -> None:
        self.lock = threading.Lock()
       


    # def write(self,apk_noMain):
    #     self.lock.acquire()
    #     with open("./apk_noMain.json", "a") as jsonFile:
    #         json.dump(apk_noMain, jsonFile)
    #     self.lock.release()


    def write(self):
        self.lock.acquire()
        
        with open("./apk_noMain.json") as f:
            list_apk = json.load(f)

        list_apk = list_apk + self.apk_noMain

        with open("./apk_noMain.json", "w") as jsonFile:
            json.dump(list_apk, jsonFile)

        self.lock.release()


    def add(self,apks):
        for sha in apks:
            self.lock.acquire()
            self.apk_noMain.append(sha)
            self.lock.release()
